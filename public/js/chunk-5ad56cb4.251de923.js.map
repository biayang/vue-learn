{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/UserManager.vue?3303","webpack:///src/views/UserManager.vue","webpack:///./src/views/UserManager.vue?f7a7","webpack:///./src/views/UserManager.vue"],"names":["$","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","attrs","on","$event","insertEvent","_v","proxy","ref","tableData","cellDBLClickEvent","formatterSex","row","editEvent","removeEvent","selectRow","submitLoading","formData","formItems","formRules","submitEvent","model","value","callback","$$v","showEdit","expression","staticRenderFns","data","authlist","password","nickname","role","authority","created","itemRender","options","console","log","window","MOCK_DATA_LIST","loadData","mounted","from","$el","querySelectorAll","forEach","methods","loading","Promise","resolve","item","label","visibleMethod","flag1","$XModal","confirm","then","type","setTimeout","component"],"mappings":"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","file":"js/chunk-5ad56cb4.251de923.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vxe-toolbar',{scopedSlots:_vm._u([{key:\"buttons\",fn:function(){return [_c('vxe-button',{attrs:{\"icon\":\"fa fa-plus\"},on:{\"click\":function($event){return _vm.insertEvent()}}},[_vm._v(\"新增\")])]},proxy:true}])}),_c('vxe-table',{ref:\"xTable\",attrs:{\"border\":\"\",\"resizable\":\"\",\"row-key\":\"\",\"show-overflow\":\"\",\"highlight-hover-row\":\"\",\"height\":\"500\",\"data\":_vm.tableData},on:{\"cell-dblclick\":_vm.cellDBLClickEvent}},[_c('vxe-table-column',{attrs:{\"type\":\"seq\",\"width\":\"60\"}}),_c('vxe-table-column',{attrs:{\"field\":\"nickname\",\"title\":\"Name\"}}),_c('vxe-table-column',{attrs:{\"field\":\"password\",\"title\":\"密码\"}}),_c('vxe-table-column',{attrs:{\"field\":\"authority\",\"title\":\"权限\",\"formatter\":_vm.formatterSex}}),_c('vxe-table-column',{attrs:{\"title\":\"操作\",\"width\":\"100\",\"show-overflow\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('vxe-button',{attrs:{\"type\":\"text\",\"icon\":\"fa fa-edit\"},on:{\"click\":function($event){return _vm.editEvent(row)}}},[_vm._v(\"编辑\")]),_c('vxe-button',{attrs:{\"type\":\"text\",\"icon\":\"fa fa-trash-o\"},on:{\"click\":function($event){return _vm.removeEvent(row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('vxe-modal',{attrs:{\"title\":_vm.selectRow ? '编辑&保存' : '新增&保存',\"width\":\"800\",\"min-width\":\"600\",\"min-height\":\"300\",\"loading\":_vm.submitLoading,\"resize\":\"\",\"destroy-on-close\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('vxe-form',{attrs:{\"data\":_vm.formData,\"items\":_vm.formItems,\"rules\":_vm.formRules,\"title-align\":\"right\",\"title-width\":\"100\"},on:{\"submit\":_vm.submitEvent}})]},proxy:true}]),model:{value:(_vm.showEdit),callback:function ($$v) {_vm.showEdit=$$v},expression:\"showEdit\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <vxe-toolbar>\n      <template v-slot:buttons>\n        <vxe-button icon=\"fa fa-plus\" @click=\"insertEvent()\">新增</vxe-button>\n      </template>\n    </vxe-toolbar>\n\n    <vxe-table\n      border\n      resizable\n      row-key\n      show-overflow\n      highlight-hover-row\n      ref=\"xTable\"\n      height=\"500\"\n      :data=\"tableData\"\n      @cell-dblclick=\"cellDBLClickEvent\"\n    >\n      <vxe-table-column type=\"seq\" width=\"60\"></vxe-table-column>\n      <vxe-table-column field=\"nickname\" title=\"Name\"></vxe-table-column>\n      <vxe-table-column field=\"password\" title=\"密码\"></vxe-table-column>\n      <vxe-table-column field=\"authority\" title=\"权限\" :formatter=\"formatterSex\"></vxe-table-column>\n      <vxe-table-column title=\"操作\" width=\"100\" show-overflow>\n        <template v-slot=\"{ row }\">\n          <vxe-button type=\"text\" icon=\"fa fa-edit\" @click=\"editEvent(row)\">编辑</vxe-button>\n          <vxe-button type=\"text\" icon=\"fa fa-trash-o\" @click=\"removeEvent(row)\">删除</vxe-button>\n        </template>\n      </vxe-table-column>\n    </vxe-table>\n\n    <vxe-modal\n      v-model=\"showEdit\"\n      :title=\"selectRow ? '编辑&保存' : '新增&保存'\"\n      width=\"800\"\n      min-width=\"600\"\n      min-height=\"300\"\n      :loading=\"submitLoading\"\n      resize\n      destroy-on-close\n    >\n      <template v-slot>\n        <vxe-form\n          :data=\"formData\"\n          :items=\"formItems\"\n          :rules=\"formRules\"\n          title-align=\"right\"\n          title-width=\"100\"\n          @submit=\"submitEvent\"\n        ></vxe-form>\n      </template>\n    </vxe-modal>\n  </div>\n</template>\n<script>\nimport hljs from \"highlight.js\";\nexport default {\n  data() {\n    return {\n      submitLoading: false,\n      tableData: [],\n      selectRow: null,\n      showEdit: false,\n      authlist: [\n        { label: \"pm\", value: \"pm\" },\n        { label: \"qa\", value: \"qa\" },\n        { label: \"op\", value: \"op\" },\n        { label: \"admin\", value: \"admin\" }\n      ],\n      formData: {\n        password: null,\n        nickname: null,\n        role: null,\n        authority: null\n      },\n      formRules: {\n        password: [\n          { required: true, message: \"请输入密码\" },\n          { min: 6, max: 15, message: \"长度在 6 到 15 个字符\" }\n        ],\n        nickname: [{ required: true, message: \"请输用户名\" }],\n        authority: [{ required: true, message: \"请选择权限\" }]\n      },\n      formItems: [\n        {\n          title: \"Basic information\",\n          span: 24,\n          titleAlign: \"left\",\n          titleWidth: 200,\n          titlePrefix: { icon: \"fa fa-address-card-o\" }\n        },\n        {\n          field: \"nickname\",\n          title: \"用户名\",\n          span: 12,\n          itemRender: { name: \"$input\", props: { placeholder: \"请输入用户名\" } }\n        },\n        {\n          field: \"password\",\n          title: \"密码\",\n          span: 12,\n          itemRender: { name: \"$input\", props: { placeholder: \"请输入密码\" } }\n        },\n        {\n          field: \"authority\",\n          title: \"权限\",\n          span: 12,\n          itemRender: { name: \"$select\", options: [] }\n        },\n        {\n          align: \"center\",\n          span: 24,\n          titleAlign: \"left\",\n          itemRender: {\n            name: \"$buttons\",\n            children: [\n              { props: { type: \"submit\", content: \"提交\", status: \"primary\" } },\n              { props: { type: \"reset\", content: \"重置\" } }\n            ]\n          }\n        }\n      ]\n    };\n  },\n  created() {\n    this.formItems[3].itemRender.options = this.authlist;\n    console.log(window.MOCK_DATA_LIST, this.formItems);\n    this.loadData();\n  },\n  mounted() {\n    Array.from(this.$el.querySelectorAll(\"pre code\")).forEach(block => {\n      hljs.highlightBlock(block);\n    });\n  },\n  methods: {\n    loadData() {\n      this.loading = true;\n      return new Promise(resolve => {\n        this.$axios\n          .post(\"auth\")\n          .then(res => {\n            const data = res.data;\n            if (data.err) {\n              this.$XModal.message({\n                status: \"error\",\n                message: data.err\n              });\n            }\n            console.log(\"data\", data, res);\n            let tb = [];\n            data.authlist.forEach(item => {\n              tb.push({\n                nickname: item.user,\n                password: item.pass,\n                authority: item.authority\n              });\n            });\n            return tb;\n          })\n          .then(tb => {\n            this.tableData = tb;\n            this.loading = false;\n          });\n        resolve();\n      });\n    },\n    formatterSex({ cellValue }) {\n      let item = this.authlist.find(item => item.value === cellValue);\n      return item ? item.label : \"\";\n    },\n    visibleMethod({ data }) {\n      return data.flag1 === \"Y\";\n    },\n    cellDBLClickEvent({ row }) {\n      this.editEvent(row);\n    },\n    insertEvent() {\n      this.formData = {\n        password: \"\",\n        nickname: \"\",\n        authority: \"\"\n      };\n      this.selectRow = null;\n      this.showEdit = true;\n    },\n    editEvent(row) {\n      this.formData = {\n        password: row.password,\n        nickname: row.nickname,\n        authority: row.authority\n      };\n      this.selectRow = row;\n      this.showEdit = true;\n    },\n    removeEvent(row) {\n      this.$XModal.confirm(\"您确定要删除该数据?\").then(type => {\n        if (type === \"confirm\") {\n          this.$axios\n            .post(\"auth/delete\", {\n              name: row.nickname,\n              password: row.password,\n              auth: row.authority\n            })\n            .then(res => {\n              if (res.status === 200) {\n                this.$XModal.message({\n                  message: \"删除成功\",\n                  status: \"success\"\n                });\n                console.log(this.$refs.xTable.afterFullData);\n                //   Object.assign(this.selectRow, this.formData);\n              }\n            });\n        }\n        this.loadData();\n      });\n    },\n    submitEvent() {\n      this.submitLoading = true;\n      setTimeout(() => {\n        this.submitLoading = false;\n        this.showEdit = false;\n        if (this.selectRow) {\n          this.$axios\n            .post(\"auth/change\", {\n              name: this.formData.nickname,\n              password: this.formData.password,\n              auth: this.formData.authority\n            })\n            .then(res => {\n              if (res.status === 200) {\n                this.$XModal.message({\n                  message: \"保存成功\",\n                  status: \"success\"\n                });\n                console.log(this.$refs.xTable.afterFullData);\n                //   Object.assign(this.selectRow, this.formData);\n              }\n            });\n        } else {\n          this.$axios\n            .post(\"auth/register\", {\n              name: this.formData.nickname,\n              password: this.formData.password,\n              auth: this.formData.authority\n            })\n            .then(res => {\n              if (res.status === 200) {\n                this.$router.push({ path: \"/git\" });\n                this.$XModal.message({\n                  message: \"新增成功\",\n                  status: \"success\"\n                });\n                this.$refs.xTable.insert(this.formData);\n                console.log(this.$refs.xTable.afterFullData);\n              } else {\n                alert(\"添加用户失败\");\n              }\n            });\n        }\n        this.loadData();\n      }, 500);\n    }\n  }\n};\n</script>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserManager.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserManager.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserManager.vue?vue&type=template&id=cd96a7ca&\"\nimport script from \"./UserManager.vue?vue&type=script&lang=js&\"\nexport * from \"./UserManager.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}