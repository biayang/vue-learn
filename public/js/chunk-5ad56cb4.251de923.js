(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ad56cb4"],{"7db0":function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").find,s=a("44d2"),i=a("ae40"),r="find",l=!0,u=i(r);r in[]&&Array(1)[r]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!u},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),s(r)},"8c0c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("vxe-toolbar",{scopedSlots:t._u([{key:"buttons",fn:function(){return[a("vxe-button",{attrs:{icon:"fa fa-plus"},on:{click:function(e){return t.insertEvent()}}},[t._v("新增")])]},proxy:!0}])}),a("vxe-table",{ref:"xTable",attrs:{border:"",resizable:"","row-key":"","show-overflow":"","highlight-hover-row":"",height:"500",data:t.tableData},on:{"cell-dblclick":t.cellDBLClickEvent}},[a("vxe-table-column",{attrs:{type:"seq",width:"60"}}),a("vxe-table-column",{attrs:{field:"nickname",title:"Name"}}),a("vxe-table-column",{attrs:{field:"password",title:"密码"}}),a("vxe-table-column",{attrs:{field:"authority",title:"权限",formatter:t.formatterSex}}),a("vxe-table-column",{attrs:{title:"操作",width:"100","show-overflow":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("vxe-button",{attrs:{type:"text",icon:"fa fa-edit"},on:{click:function(e){return t.editEvent(n)}}},[t._v("编辑")]),a("vxe-button",{attrs:{type:"text",icon:"fa fa-trash-o"},on:{click:function(e){return t.removeEvent(n)}}},[t._v("删除")])]}}])})],1),a("vxe-modal",{attrs:{title:t.selectRow?"编辑&保存":"新增&保存",width:"800","min-width":"600","min-height":"300",loading:t.submitLoading,resize:"","destroy-on-close":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("vxe-form",{attrs:{data:t.formData,items:t.formItems,rules:t.formRules,"title-align":"right","title-width":"100"},on:{submit:t.submitEvent}})]},proxy:!0}]),model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}})],1)},o=[],s=(a("7db0"),a("4160"),a("a630"),a("d3b7"),a("3ca3"),a("159b"),a("1487")),i=a.n(s),r={data:function(){return{submitLoading:!1,tableData:[],selectRow:null,showEdit:!1,authlist:[{label:"pm",value:"pm"},{label:"qa",value:"qa"},{label:"op",value:"op"},{label:"admin",value:"admin"}],formData:{password:null,nickname:null,role:null,authority:null},formRules:{password:[{required:!0,message:"请输入密码"},{min:6,max:15,message:"长度在 6 到 15 个字符"}],nickname:[{required:!0,message:"请输用户名"}],authority:[{required:!0,message:"请选择权限"}]},formItems:[{title:"Basic information",span:24,titleAlign:"left",titleWidth:200,titlePrefix:{icon:"fa fa-address-card-o"}},{field:"nickname",title:"用户名",span:12,itemRender:{name:"$input",props:{placeholder:"请输入用户名"}}},{field:"password",title:"密码",span:12,itemRender:{name:"$input",props:{placeholder:"请输入密码"}}},{field:"authority",title:"权限",span:12,itemRender:{name:"$select",options:[]}},{align:"center",span:24,titleAlign:"left",itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"提交",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}]}},created:function(){this.formItems[3].itemRender.options=this.authlist,console.log(window.MOCK_DATA_LIST,this.formItems),this.loadData()},mounted:function(){Array.from(this.$el.querySelectorAll("pre code")).forEach((function(t){i.a.highlightBlock(t)}))},methods:{loadData:function(){var t=this;return this.loading=!0,new Promise((function(e){t.$axios.post("auth").then((function(e){var a=e.data;a.err&&t.$XModal.message({status:"error",message:a.err}),console.log("data",a,e);var n=[];return a.authlist.forEach((function(t){n.push({nickname:t.user,password:t.pass,authority:t.authority})})),n})).then((function(e){t.tableData=e,t.loading=!1})),e()}))},formatterSex:function(t){var e=t.cellValue,a=this.authlist.find((function(t){return t.value===e}));return a?a.label:""},visibleMethod:function(t){var e=t.data;return"Y"===e.flag1},cellDBLClickEvent:function(t){var e=t.row;this.editEvent(e)},insertEvent:function(){this.formData={password:"",nickname:"",authority:""},this.selectRow=null,this.showEdit=!0},editEvent:function(t){this.formData={password:t.password,nickname:t.nickname,authority:t.authority},this.selectRow=t,this.showEdit=!0},removeEvent:function(t){var e=this;this.$XModal.confirm("您确定要删除该数据?").then((function(a){"confirm"===a&&e.$axios.post("auth/delete",{name:t.nickname,password:t.password,auth:t.authority}).then((function(t){200===t.status&&(e.$XModal.message({message:"删除成功",status:"success"}),console.log(e.$refs.xTable.afterFullData))})),e.loadData()}))},submitEvent:function(){var t=this;this.submitLoading=!0,setTimeout((function(){t.submitLoading=!1,t.showEdit=!1,t.selectRow?t.$axios.post("auth/change",{name:t.formData.nickname,password:t.formData.password,auth:t.formData.authority}).then((function(e){200===e.status&&(t.$XModal.message({message:"保存成功",status:"success"}),console.log(t.$refs.xTable.afterFullData))})):t.$axios.post("auth/register",{name:t.formData.nickname,password:t.formData.password,auth:t.formData.authority}).then((function(e){200===e.status?(t.$router.push({path:"/git"}),t.$XModal.message({message:"新增成功",status:"success"}),t.$refs.xTable.insert(t.formData),console.log(t.$refs.xTable.afterFullData)):alert("添加用户失败")})),t.loadData()}),500)}}},l=r,u=a("2877"),c=Object(u["a"])(l,n,o,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-5ad56cb4.251de923.js.map